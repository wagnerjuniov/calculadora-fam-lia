<!-- ================================================================================================
     CALCULADORA FINANCEIRA FAMILIAR (LAYOUT ‚ÄúESTILO APPLE‚Äù v2)
     Copie todo este arquivo para index.html e abra no navegador.
================================================================================================ -->

<!-- ===== IN√çCIO: BLOCO‚ÄØ1 ‚Äì Estrutura HTML & Metadados ========================================== -->
<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Calculadora Financeira Familiar</title>

  <!-- Chart.js (gr√°fico r√°pido) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<!-- ===== IN√çCIO: BLOCO‚ÄØ2 ‚Äì CSS (vari√°veis, layout, anima√ß√µes) ================================ -->
<style>
/* ---------- Vari√°veis de tema ---------- */
:root{
  --font: -apple-system, BlinkMacSystemFont, "San Francisco", "Segoe UI", Roboto, sans-serif;
  --radius: 18px; --shadow: 0 4px 12px rgba(0,0,0,.25); --tab-h: 60px;

  /* Light */
  --cl-bg:#ffffff; --cl-card:#f5f5f7; --cl-text:#1c1c1e; --cl-sub:#6e6e73;
  --cl-accent:#007aff; --cl-pos:#32d74b; --cl-neg:#ff453a; --cl-border:#d2d2d7;
  /* Dark */
  --dk-bg:#000000; --dk-card:#1c1c1e; --dk-text:#f2f2f2; --dk-sub:#8e8e93;
  --dk-accent:#0a84ff; --dk-pos:#32d74b; --dk-neg:#ff453a; --dk-border:#2c2c2e;
}

/* Tema din√¢mico */
html[data-theme="light"]{
  --bg:var(--cl-bg); --card:var(--cl-card); --text:var(--cl-text); --sub:var(--cl-sub);
  --accent:var(--cl-accent); --pos:var(--cl-pos); --neg:var(--cl-neg); --border:var(--cl-border);
}
html[data-theme="dark"]{
  --bg:var(--dk-bg); --card:var(--dk-card); --text:var(--dk-text); --sub:var(--dk-sub);
  --accent:var(--dk-accent); --pos:var(--dk-pos); --neg:var(--dk-neg); --border:var(--dk-border);
}

/* ---------- Reset & base ---------- */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:var(--font); background:var(--bg); color:var(--text);
  line-height:1.4; min-height:100vh; display:flex; flex-direction:column;
  transition:background .4s ease,color .4s ease,opacity .6s ease;
  padding-bottom:var(--tab-h);
  opacity:0; /* splash fade‚Äëin */
}
h1{font-weight:700;font-size:2rem;}
button{font-family:inherit;border:none;cursor:pointer;transition:filter .3s;}
button:hover{filter:brightness(1.1);}
input,select{font-family:inherit;color:var(--text);background:transparent;border:1px solid var(--border);}
input::placeholder{color:var(--sub);}

/* ---------- Header ---------- */
header{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;}
#themeToggle{
  inline-size:3rem;block-size:1.5rem;border-radius:var(--radius);
  background:var(--card);box-shadow:var(--shadow);position:relative;
}
#themeToggle::after{
  content:"‚òÄÔ∏è"; position:absolute; inset:0; display:flex;justify-content:center;align-items:center;
  transition:transform .4s;
}
html[data-theme="dark"] #themeToggle::after{content:"üåô"; transform:rotate(180deg);}

/* ---------- Cards resumo ---------- */
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;padding:0 1.5rem 1rem;}
.card{
  background:var(--card);border-radius:var(--radius);padding:1rem;box-shadow:var(--shadow);
  backdrop-filter:blur(10px); /* efeito vidro */
}
.label{font-size:.875rem;color:var(--sub);}
.value{font-size:1.25rem;font-weight:600;margin-top:.25rem;}

/* ---------- Formul√°rio ---------- */
form{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);margin:0 1.5rem 1rem;padding:1rem;}
.row{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:.75rem;}
input,select{flex:1 1 150px;padding:.55rem .75rem;border-radius:var(--radius);}
form button{
  background:var(--accent);color:#fff;font-weight:600;padding:.55rem 1.25rem;border-radius:var(--radius);
}

/* ---------- Tabela ---------- */
table{width:100%;border-collapse:collapse;margin:0 1.5rem 2rem;font-size:.875rem;}
th,td{padding:.75rem;border-bottom:1px solid var(--card);}
th{color:var(--sub);font-weight:500;text-align:left;}
.pos{color:var(--pos);} .neg{color:var(--neg);}

/* ---------- Gr√°fico ---------- */
#chartBox{margin:0 1.5rem 2.5rem;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:1rem;}
canvas{max-inline-size:100%;block-size:260px;}

/* ---------- Tab Bar (navega√ß√£o iOS) ---------- */
.tabbar{
  position:fixed;bottom:0;left:0;right:0;height:var(--tab-h);
  background:rgba(249,249,249,.3); /* transluc√™ncia gen√©rica */
  backdrop-filter:blur(20px);display:flex;justify-content:space-around;align-items:center;
  border-top:1px solid var(--border);
}
.tab{display:flex;flex-direction:column;align-items:center;gap:.15rem;color:var(--sub);font-size:.675rem;cursor:pointer;transition:color .25s;}
.tab .icon{font-size:1.15rem;line-height:1;}
.tab.active{color:var(--accent);}
.tab:active{transform:scale(.95);}

/* ---------- Anima√ß√µes ---------- */
.fade-slide{opacity:0;transform:translateY(8px);transition:opacity .5s ease,transform .5s ease;}
.fade-slide.show{opacity:1;transform:none;}
</style>
<!-- ===== FIM: BLOCO‚ÄØ2 ‚Äì CSS ==================================================================== -->
</head>

<!-- ===== IN√çCIO: BLOCO‚ÄØ3 ‚Äì Corpo & Layout ====================================================== -->
<body>
<header>
  <h1 class="fade-slide">Calculadora Familiar</h1>
  <button id="themeToggle" aria-label="Alternar tema" class="fade-slide"></button>
</header>

<section class="cards fade-slide">
  <div class="card"><span class="label">Saldo&nbsp;Geral</span><span id="saldoGeral" class="value">R$‚ÄØ0,00</span></div>
  <div class="card"><span class="label">Receitas</span><span id="totalReceitas" class="value pos">R$‚ÄØ0,00</span></div>
  <div class="card"><span class="label">Despesas</span><span id="totalDespesas" class="value neg">R$‚ÄØ0,00</span></div>
</section>

<form id="formLancamento" class="fade-slide">
  <div class="row">
    <select id="tipo">
      <option value="receita">Receita</option>
      <option value="despesa">Despesa</option>
    </select>
    <input id="categoria" type="text" placeholder="Categoria (ex.: Sal√°rio, Mercado)" required />
    <input id="valor" type="number" step="0.01" placeholder="Valor (R$)" required />
    <input id="data" type="date" required />
  </div>
  <button type="submit">Adicionar</button>
</form>

<table class="fade-slide">
  <thead><tr><th>Data</th><th>Categoria</th><th>Tipo</th><th>Valor</th></tr></thead>
  <tbody id="listaLancamentos"></tbody>
</table>

<div id="chartBox" class="fade-slide"><canvas id="chart"></canvas></div>

<!-- Barra inferior estilo iOS -->
<nav class="tabbar fade-slide">
  <div class="tab active" data-tab="home"><span class="icon">üè†</span><span>In√≠cio</span></div>
  <div class="tab" data-tab="list"><span class="icon">üìÑ</span><span>Lan√ßar</span></div>
  <div class="tab" data-tab="chart"><span class="icon">üìà</span><span>Gr√°fico</span></div>
  <div class="tab" data-tab="settings"><span class="icon">‚öôÔ∏è</span><span>Ajustes</span></div>
</nav>
<!-- ===== FIM: BLOCO‚ÄØ3 ‚Äì Corpo & Layout ========================================================= -->

<!-- ===== IN√çCIO: BLOCO‚ÄØ4 ‚Äì JS Utilidades & Tema =============================================== -->
<script>
/* ---------- Splash fade‚Äëin ---------- */
window.addEventListener('load',()=>{document.body.style.opacity=1;document.querySelectorAll('.fade-slide').forEach(el=>el.classList.add('show'));});

/* ---------- Moeda BR ---------- */
const fmtValor = v => new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(v);

/* ---------- Altern√¢ncia de tema ---------- */
document.getElementById('themeToggle').onclick=()=>{
  const html=document.documentElement;
  html.dataset.theme = html.dataset.theme==='light' ? 'dark' : 'light';
};

/* ---------- Aba ativa na tab bar ---------- */
document.querySelectorAll('.tab').forEach(t=>{
  t.addEventListener('click',()=>{
    document.querySelector('.tab.active')?.classList.remove('active');
    t.classList.add('active');
    /* futura navega√ß√£o de se√ß√µes pode ser handle aqui */
  });
});
</script>
<!-- ===== FIM: BLOCO‚ÄØ4 ‚Äì JS Utilidades & Tema =================================================== -->

<!-- ===== IN√çCIO: BLOCO‚ÄØ5 ‚Äì JS Lan√ßamentos & Gr√°fico =========================================== -->
<script>
const listaEl=document.getElementById('listaLancamentos');
const receitasEl=document.getElementById('totalReceitas');
const despesasEl=document.getElementById('totalDespesas');
const saldoEl=document.getElementById('saldoGeral');

let transacoes=[];

/* ---------- Gr√°fico ---------- */
const ctx=document.getElementById('chart');
const grafico=new Chart(ctx,{
  type:'bar',
  data:{labels:[],datasets:[{label:'Despesas',data:[],backgroundColor:'var(--neg)'}]},
  options:{
    responsive:true,
    plugins:{legend:{display:false}},
    scales:{y:{ticks:{callback:(v)=>`R$ ${v}`}}}
  }
});

/* ---------- Lan√ßar transa√ß√£o ---------- */
document.getElementById('formLancamento').addEventListener('submit',e=>{
  e.preventDefault();
  const tipo=document.getElementById('tipo').value;
  const categoria=document.getElementById('categoria').value.trim();
  const valor=parseFloat(document.getElementById('valor').value);
  const data=document.getElementById('data').value;
  if(!categoria||!valor||!data){alert('Preencha todos os campos!');return;}

  transacoes.push({tipo,categoria,valor,data});
  e.target.reset(); atualizarUI();
});

/* ---------- Atualiza UI ---------- */
function atualizarUI(){
  listaEl.innerHTML='';
  let totR=0,totD=0; const despCat={};

  transacoes.forEach(t=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${new Date(t.data).toLocaleDateString('pt-BR')}</td>
                  <td>${t.categoria}</td>
                  <td>${t.tipo==='receita'?'Receita':'Despesa'}</td>
                  <td class="${t.tipo==='receita'?'pos':'neg'}">${fmtValor(t.valor)}</td>`;
    listaEl.appendChild(tr);

    if(t.tipo==='receita') totR+=t.valor;
    else{totD+=t.valor; despCat[t.categoria]=(despCat[t.categoria]||0)+t.valor;}
  });

  receitasEl.textContent=fmtValor(totR);
  despesasEl.textContent=fmtValor(totD);
  saldoEl.textContent=fmtValor(totR-totD);

  grafico.data.labels=Object.keys(despCat);
  grafico.data.datasets[0].data=Object.values(despCat);
  grafico.update();
}

/* inicial */
atualizarUI();
</script>
<!-- ===== FIM: BLOCO‚ÄØ5 ‚Äì JS Lan√ßamentos & Gr√°fico =============================================== -->
</body>
</html>
<!-- ============================================================================================= -->